package com.example.spiel;

import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;

import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.Random;

//Diese Klasse kümmert sich um die Sounds und Musik
public class GameSounds {
    private MediaPlayer backGroundPlayer;
    private MediaPlayer startMusicPlayer;

    //Spielt einen zufaelligen Song ab
    void playRandomSong() {
        String song = getRandomSong();
        Media media = new Media(Paths.get(song).toUri().toString());
        backGroundPlayer = new MediaPlayer(media);
        backGroundPlayer.setVolume(0.8);
        backGroundPlayer.play();
    }

    //Gibt einen zufälligen Songnamen zurueck
    private String getRandomSong() {
        ArrayList<String> playList = new ArrayList<>();
        String path = "src/main/resources/Songs/";

        int numberOfSongs = 3; //Anzahl der Lieder aendern
        for (int i = 1; i <= numberOfSongs; i++) {
            playList.add(path + "song" + i + ".mp3");
        }

        Random rand = new Random();
        return playList.get(rand.nextInt(numberOfSongs));
    }

    void stopMusic() {
        if (backGroundPlayer != null) {
            backGroundPlayer.stop();
        }
    }

    void pauseMusic() {
        backGroundPlayer.pause();
    }

    void resumeMusic() {
        backGroundPlayer.play();
    }

    //Spielt den Todessound ab
    void playDeathSound() {
        MediaPlayer deathSoundPlayer = new MediaPlayer(new Media(Paths.get("src/main/resources/Songs/deathsound.mp3").toUri().toString()));
        deathSoundPlayer.play();
    }

    //Spielt den beim Besiegen des Bosses ab
    void playBossDeathSound() {
        MediaPlayer bossDeathSoundPlayer = new MediaPlayer(new Media(Paths.get("src/main/resources/Songs/bossDeathSound.mp3").toUri().toString()));
        bossDeathSoundPlayer.play();
    }

    //Spielt die Startmenue Musik ab
    void playStartMusic() {
        startMusicPlayer = new MediaPlayer(new Media(Paths.get("src/main/resources/Songs/startmusic.mp3").toUri().toString()));
        startMusicPlayer.setVolume(0.8);
        startMusicPlayer.setAutoPlay(true);
        startMusicPlayer.setCycleCount(MediaPlayer.INDEFINITE);
        startMusicPlayer.play();
    }

    //Stoppt die Startmanue Musik
    void stopStartMusic() {
        startMusicPlayer.stop();
    }

    //Spielt den Hover Sound über den Knoepfen ab
    void playHoverSound() {
        MediaPlayer hoverSoundPlayer = new MediaPlayer(new Media(Paths.get("src/main/resources/Songs/hoversound.mp3").toUri().toString()));
        hoverSoundPlayer.setVolume(1);
        hoverSoundPlayer.play();
    }

    //Spielt den Sound ab, der beim druecken eines Knopfes kommt.
    void playSelectedSound() {
        MediaPlayer selectedSoundPlayer = new MediaPlayer(new Media(Paths.get("src/main/resources/Songs/selected.wav").toUri().toString()));
        selectedSoundPlayer.play();
    }

    void playHighScoreSound() {
        MediaPlayer selectedSoundPlayer = new MediaPlayer(new Media(Paths.get("src/main/resources/Songs/highscoresound.mp3").toUri().toString()));
        selectedSoundPlayer.play();
    }
}