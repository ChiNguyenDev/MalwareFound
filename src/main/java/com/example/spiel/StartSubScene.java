package com.example.spiel;

import javafx.animation.FillTransition;
import javafx.animation.TranslateTransition;
import javafx.scene.SubScene;
import javafx.scene.image.Image;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.util.Duration;

public class StartSubScene extends SubScene {
    private final static String BACKGROUND_IMAGE = "file:src/main/resources/Background/Terminal2.png";
    private boolean isHidden; // Gibt an, ob die Subszene ausgeblendet ist
    AnchorPane subSceneRoot;

    public StartSubScene() {
        super(new AnchorPane(), 832.26, 556.78);

        BackgroundImage image = new BackgroundImage(new Image(BACKGROUND_IMAGE, 832.26, 556.78, false, true), BackgroundRepeat.NO_REPEAT, BackgroundRepeat.NO_REPEAT, BackgroundPosition.DEFAULT, null);
        subSceneRoot = (AnchorPane) this.getRoot();
        subSceneRoot.setBackground(new Background(image));

        setLayoutX(1980);
        setLayoutY(100);

        isHidden = true; // Die Subszene ist anfangs ausgeblendet
        createLinuxRectangle();
    }

    //Diese Methode erstellt blinkendes gruenes Rechteck fuer das Linux Terminal
    void createLinuxRectangle() {
        Rectangle rectangle = new Rectangle(11.5, 23, Color.web("green", 1));
        rectangle.setX(315);
        rectangle.setY(34.5);
        // Logik für den Blinkeffekt
        FillTransition fillTransition = new FillTransition(Duration.seconds(0.33), rectangle, Color.web("green", 1),
                Color.web("black", 1));
        fillTransition.setAutoReverse(true);
        fillTransition.setCycleCount(Integer.MAX_VALUE);
        fillTransition.playFromStart();

        subSceneRoot.getChildren().add(rectangle);
    }

    // Diese Methode ist für die Einblendungs-Animation zuständig
    public void moveSubScene() {
        TranslateTransition transition = new TranslateTransition();
        transition.setDuration(Duration.seconds(0.3));
        transition.setNode(this);
        if (isHidden) {
            transition.setToX(-1676); // Einblenden der Subszene
            isHidden = false;
        } else {
            transition.setToX(0); // Ausblenden der Subszene
            isHidden = true;
        }
        transition.play();
    }

    public AnchorPane getSubSceneRoot() {
        return subSceneRoot;
    }
}